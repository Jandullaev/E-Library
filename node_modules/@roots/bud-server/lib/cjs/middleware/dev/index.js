"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const dev_dependencies_1 = require("./dev.dependencies");
/**
 * Dev middleware factory
 *
 * @public
 */
function dev(app) {
    const options = makeOptions(app);
    return (0, dev_dependencies_1.WebpackDevMiddleware)(app.compiler.instance, options);
}
exports.default = dev;
/**
 * Dev middleware options factory
 *
 * @public
 */
const makeOptions = (app) => ({
    headers: {
        ['X-Server']: '@roots/bud',
    },
    publicPath: app.hooks.filter('build.output.publicPath'),
    stats: false,
    writeToDisk: true,
});
